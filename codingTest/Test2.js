const isInside = (point, polygon) => {
	const x = point[0];
	const y = point[1];
	let inside = false;
	for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {
		const xi = polygon[i][0];
		const yi = polygon[i][1];
		const xj = polygon[j][0];
		const yj = polygon[j][1];

		const intersect = yi > y !== yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;
		if (intersect) {
			inside = !inside;
		}
	}
	return inside;
};

// const pointToCheck = [-0.0003303500632709233, 0.9756620985760516]; // 얼굴 > 최상단
// const pointToCheck = [-0.03313764552974638, 0.9383400542401085]; // 얼굴 > 우측 관자놀이
// const pointToCheck = [-0.04123257221813881, 0.9078143990450622]; // 얼굴 > 우측 귀
const pointToCheck = [-0.026684479347147017, 0.880059019009599]; // 얼굴 > 아랫머리
// const pointToCheck = [0.015810172678904, 0.9181690748071367]; // 얼굴 > 좌측 눈
// const pointToCheck = [-0.0016647440521117551, 0.8840940312977174]; // 얼굴 > 입술

// const pointToCheck = [0.08147999016461638, 0.825179357520045]; // 어깨
// const pointToCheck = [-0.08712333620250107, 0.7334659081094089]; // 상완
// const pointToCheck = [-0.10365693814540897, 0.6287690329216536]; // 하완근
// const pointToCheck = [-0.11606138940429733, 0.5342836031468624]; // 바닥
// const pointToCheck = [0.09849533996869417, 0.4886598265678874]; // 손가락

// const pointToCheck = [-0.05316952984960366, 0.5053159984376298]; // 우측 허벅지
// const pointToCheck = [0.02581099233408707, 0.3350485192295585]; // 좌측 허벅지
// const pointToCheck = [-0.00011872688761838113, 0.5547009535010802]; // 생식기
// const pointToCheck = [-0.0013907162162271614, 0.8497066942824265]; // 몸체 > 목부위
// const pointToCheck = [0.02883397979033453, 0.7855075253145882]; // 몸체 > 상체
// const pointToCheck = [-0.002085950697262029, 0.6429511510595166]; // 몸체 > 복부

// 범위값
const LEFT_ARM_RANGE = [
	[0.07075129807, 0.8502623438],
	[0.07075129807, 0.7749606045],
	[0.06339526084, 0.6636613993],
	[0.09187008703, 0.5531996546],
	[0.08497628646, 0.4447140974],
	[0.2030475085, 0.4447140974],
	[0.2030475085, 0.5549734513],
	[0.2030475085, 0.8502623438],
];
const RIGHT_ARM_RANGE = [
	[-0.07075129807, 0.8502623438],
	[-0.07075129807, 0.7749606045],
	[-0.06339526084, 0.6636613993],
	[-0.09187008703, 0.5531996546],
	[-0.08497628646, 0.4447140974],
	[-0.2030475085, 0.4447140974],
	[-0.2030475085, 0.5549734513],
	[-0.2030475085, 0.8502623438],
];
const RIGHT_LOWER_RANGE = [
	[0, 0.536389048],
	[0, 0.04229329645],
	[-0.0984691604, 0.04229329645],
	[-0.07028732821, 0.3445076024],
	[-0.09095170525, 0.5053926707],
	[-0.09187008702, 0.5531996545],
	[-0.08073509884, 0.6131440849],
	[-0.06994676873, 0.6131440849],
	[-0.02348357854, 0.5661567227],
];
const LEFT_LOWER_RANGE = [
	[0, 0.536389048],
	[0, 0.04229329645],
	[0.0984691604, 0.04229329645],
	[0.07028732821, 0.3445076024],
	[0.09095170525, 0.5053926707],
	[0.09187008702, 0.5531996545],
	[0.08073509884, 0.6131440849],
	[0.06994676873, 0.6131440849],
	[0.02348357854, 0.5661567227],
];
const GENITALIA_RANGE = [
	[-0.028277076377328736, 0.566156722653713],
	[-0.005313662740094871, 0.536389047988373],
	[0.005313662740094871, 0.536389047988373],
	[0.028277076377328736, 0.566156722653713],
];
const BODY_RANGE = [
	[-0.02244633818, 0.8809656452],
	[-0.08055845867, 0.8293203514],
	[-0.06339526083, 0.6636613993],
	[-0.06994676873, 0.6063824619],
	[-0.02348357854, 0.5661567227],
	[0.02348357854, 0.5661567227],
	[0.06994676873, 0.6063824619],
	[0.06339526083, 0.6636613993],
	[0.08055845867, 0.8293203514],
	[0.02244633818, 0.8809656452],
	[0, 0.8657289521],
];
const FACE_RANGE = [
	[0, 0.8645244883],
	[0.04691399596, 0.880965645151709],
	[0.04691399596, 1],
	[-0.04691399596, 1],
	[-0.04691399596, 0.880965645151709],
];

// 변수 설정
// bodyParts 정의
let bodyPartsEnum = {};
let isLeft = pointToCheck[0] >= 0;
// 대분류
let rangePart = "";
// 실제 부위
let bodyPart = "";


// 부위
/// 얼굴
const nose = [
	[-0.006232318490286326, 0.9172892584829597],
	[-0.0064196725963595325, 0.9072253915778081],
	[-0.009599109338543632, 0.8979251191104771],
	[-0.0020304409988151084, 0.8959381691237198],
	[0.009599109338543632, 0.8979251191104771],
	[0.0064196725963595325, 0.9072253915778081],
	[0.006232318490286326, 0.9172892584829597],
];
const lip = [
	[-0.013403881867043554, 0.8840345043288681],
	[0, 0.878673645415576],
	[0.013403881867043554, 0.8840345043288681],
	[0, 0.8899287599301362],
];
const rhseye = [
	[-0.0026453615309422474, 0.9191879295384713],
	[-0.011009814649455052, 0.9231292363090097],
	[-0.018864936541263366, 0.9244371888053362],
	[-0.026808275055477948, 0.9178597697873556],
	[-0.015611156381056313, 0.9105577050647208],
];
const rhsear = [
	[-0.03460711764, 0.9203486703],
	[-0.02918023482, 0.8956723439],
	[-0.07075129807, 0.8956723439],
	[-0.07075129807, 0.9203486703],
];
const lhseye = [
	[0.0026453615309422474, 0.9191879295384713],
	[0.011009814649455052, 0.9231292363090097],
	[0.018864936541263366, 0.9244371888053362],
	[0.026808275055477948, 0.9178597697873556],
	[0.015611156381056313, 0.9105577050647208],
];
const lhsear = [
	[0.03460711764, 0.9203486703],
	[0.02918023482, 0.8956723439],
	[0.07075129807, 0.8956723439],
	[0.07075129807, 0.9203486703],
];
const scalp = [
	[-0.03460711764, 0.9203486703],
	[0.03460711764, 0.9203486703],
	[0.04691399596, 1],
	[-0.04691399596, 1],
];
const face = [
	[0, 0.8645244883],
	[0.04691399596, 0.8809656452],
	[0.03460711764, 0.9203486703],
	[-0.03460711764, 0.9203486703],
	[-0.04691399596, 0.8809656452],
];

// 팔
const rhsshoulder = [
	[-0.07075129807, 0.850262343799802],
	[-0.070751298072012, 0.774960604489241],
	[-0.203047508483442, 0.774960604489241],
	[-0.203047508483442, 0.850262343799802],
];
const rhsupperarm = [
	[-0.07075129807, 0.774960604489241],
	[-0.0744251520225957, 0.690060274889673], // 39
	[-0.203047508483442, 0.695192359245078], // 45
	[-0.203047508483442, 0.774849623785469],
];
const rhslowerarm = [
	[-0.0744251520225958, 0.690060274889674],
	[-0.0918700870272436, 0.553199654576118],
	[-0.203047508483442, 0.554973451250753],
	[-0.203047508483442, 0.695192359245078],
];
const rhspalm = [
	[-0.0918700870272436, 0.553199654576118],
	[-0.09095170526, 0.505392670705313],
	[-0.132978232443043, 0.505392670705313],
	[-0.128965157205217, 0.53624166586188],
	[-0.120365378300837, 0.554973451250753],
];
const rhsfinder = [
	[-0.09095170526, 0.505392670705313],
	[-0.09095170526, 0.459447225596939],
	[-0.203047508483442, 0.459447225596939],
	[-0.203047508483442, 0.53624166586188],
	[-0.128965157205217, 0.53624166586188],
	[-0.132978232443043, 0.505392670705313],
];
const lhsshoulder = [
	[0.07075129807, 0.850262343799802],
	[0.070751298072012, 0.774960604489241],
	[0.203047508483442, 0.774960604489241],
	[0.203047508483442, 0.850262343799802],
];
const lhsupperarm = [
	[0.07075129807, 0.774960604489241],
	[0.0744251520225957, 0.690060274889673], // 39
	[0.203047508483442, 0.695192359245078], // 45
	[0.203047508483442, 0.774849623785469],
];
const lhslowerarm = [
	[0.0744251520225958, 0.690060274889674],
	[0.0918700870272436, 0.553199654576118],
	[0.203047508483442, 0.554973451250753],
	[0.203047508483442, 0.695192359245078],
];
const lhspalm = [
	[0.0918700870272436, 0.553199654576118],
	[0.09095170526, 0.505392670705313],
	[0.132978232443043, 0.505392670705313],
	[0.128965157205217, 0.53624166586188],
	[0.120365378300837, 0.554973451250753],
];
const lhsfinder = [
	[0.09095170526, 0.505392670705313],
	[0.09095170526, 0.459447225596939],
	[0.203047508483442, 0.459447225596939],
	[0.203047508483442, 0.53624166586188],
	[0.128965157205217, 0.53624166586188],
	[0.132978232443043, 0.505392670705313],
];

// 하체
const rhsthigh = [
	[0, 0.536389048],
	[0, 0.3445076024],
	[-0.07028732821, 0.3445076024],
	[-0.09095170525, 0.5053926707],
	[-0.09187008702, 0.5531996545],
	[-0.08073509884, 0.6131440849],
	[-0.06994676873, 0.6131440849],
	[-0.02348357854, 0.5661567227],
]; // 허벅지
const rhscalf= [
	[0, 0.3445076024],
	[0, 0.1409723916],
	[-0.0984691603, 0.1409723915],
	[-0.07028732821, 0.3445076024],
]; // 종아리
const rhsinstep = [
	[0, 0.1409723916],
	[0, 0.06605569214],
	[-0.0984691604, 0.07653475287],
	[-0.0984691604, 0.1409723916],
]; // 발등
const rhstoe  = [
	[0, 0.06605569214],
	[0, 0.04229329645],
	[-0.0984691604, 0.04229329645],
	[-0.0984691604, 0.07653475287],
]; // 발가락
const lhsthigh = [
	[0, 0.536389048],
	[0, 0.3445076024],
	[0.07028732821, 0.3307119721],
	[0.09095170525, 0.5053926707],
	[0.09187008702, 0.5531996545],
	[0.08073509884, 0.6131440849],
	[0.06994676873, 0.6131440849],
	[0.02348357854, 0.5661567227],
]; // 허벅지
const lhscalf = [
	[0, 0.3445076024],
	[0, 0.1409723916],
	[0.0984691603, 0.1409723915],
	[0.07028732821, 0.3445076024],
]; // 종아리
const lhsinstep = [
	[0, 0.1409723916],
	[0, 0.06605569214],
	[0.0984691604, 0.07653475287],
	[0.0984691604, 0.1409723916],
]; // 발등
const lhstoe = [
	[0, 0.06605569214],
	[0, 0.04229329645],
	[0.0984691604, 0.04229329645],
	[0.0984691604, 0.07653475287],
]; // 발가락
const genitalia = [
	[-0.028277076377328736, 0.566156722653713],
	[-0.005313662740094871, 0.536389047988373],
	[0.005313662740094871, 0.536389047988373],
	[0.028277076377328736, 0.566156722653713],
]; // 생식기

// 상체
const neck = [
	[-0.02244633818, 0.8809656452],
	[-0.05150239843, 0.8551429983],
	[0, 0.8238718482],
	[0.05150239843, 0.8551429983],
	[0.02244633818, 0.8809656452],
	[0, 0.8657289521],
]; // 목
const chest = [
	[-0.05150239843, 0.8551429983],
	[-0.08055845867, 0.8293203514],
	[-0.06339526083, 0.6636613993],
	[0, 0.7124121721],
	[0.06339526083, 0.6636613993],
	[0.08055845867, 0.8293203514],
	[0.05150239843, 0.8551429983],
	[0, 0.8238718482],
]; // 가슴
const stomach = [
	[-0.06339526083, 0.6636613993],
	[-0.06994676873, 0.6063824619],
	[-0.02348357854, 0.5661567227],
	[0.02348357854, 0.5661567227],
	[0.06994676873, 0.6063824619],
	[0.06339526083, 0.6636613993],
	[0, 0.7124121721],
]; // 복부

const rangeEnum = {
	// 얼굴 (윗머리, 아랫머리, 코, 입, 좌|우측 귀, 좌|우측 눈)
	FACE: FACE_RANGE,
	// 팔 (어깨, 상완근, 하완근, 손바닥, 손가락)
	LEFT_ARM: LEFT_ARM_RANGE,
	RIGHT_ARM: RIGHT_ARM_RANGE,
	// 몸체 (목, 가슴, 복부)
	BODY: BODY_RANGE,
	// 하체 (좌|우측 하체 , 생식기)
	RIGHT_LOWER: RIGHT_LOWER_RANGE,
	LEFT_LOWER: LEFT_LOWER_RANGE,
	GENITALIA: GENITALIA_RANGE,

};
Object.freeze(rangeEnum);

// 1. 위치 분류
for (let i = 0; i <= Object.keys(rangeEnum).length; i++) {
	if (isInside(pointToCheck, Object.values(rangeEnum)[i])) {
		rangePart = Object.keys(rangeEnum)[i];
		break;
	}
}
console.log("rangePart >> ", rangePart);

// rangePart가 얼굴인경우
if (rangePart === "FACE") {
	if (isLeft) {
		bodyPartsEnum.LHSEYE = lhseye;
		bodyPartsEnum.LHSEAR = lhsear;
	} else if (!isLeft) {
		bodyPartsEnum.RHSEYE = rhseye;
		bodyPartsEnum.RHSEAR = rhsear;
	}
	bodyPartsEnum = {
		...bodyPartsEnum,
		nose: nose,
		lip: lip,
		scalp: scalp,
		face: face,
	};
}

// rangePart가 팔인 경우
if (rangePart.includes("_ARM")) {
	if (isLeft) {
		bodyPartsEnum = {
			shoulder: lhsshoulder,
			upperArm: lhsupperarm,
			lowerArm: lhslowerarm,
			palm: lhspalm,
			finger: lhsfinder,
		};
	} else if (!isLeft) {
		bodyPartsEnum = {
			shoulder: rhsshoulder,
			upperArm: rhsupperarm,
			lowerArm: rhslowerarm,
			palm: rhspalm,
			finger: rhsfinder,
		};
	}
}

// rangePart가 하체인경우
if (rangePart.includes("_LOWER")) {
	if (rangePart === "RIGHT_LOWER") {
		bodyPartsEnum = {
			thigh: rhsthigh,
			calf: rhscalf,
			instep: rhsinstep,
			toe: rhstoe,
		};
	} else if (rangePart === "LEFT_LOWER") {
		bodyPartsEnum = {
			thigh: lhsthigh,
			calf: lhscalf,
			instep: lhsinstep,
			toe: lhstoe,
		};
	}
}

// rangePart가 생식기
if (rangePart.includes("GENITALIA")) {
	bodyPartsEnum = {
		genitalia: genitalia,
	};
}

// rangePart가 상체
if (rangePart.includes("BODY")) {
	bodyPartsEnum = {
		neck: neck,
		chest: chest,
		stomach: stomach,
	};
}

// rangePart가 결론
Object.freeze(bodyPartsEnum);

if (Object.keys(bodyPartsEnum).length > 0) {
	for (let i = 0; i <= Object.keys(bodyPartsEnum).length; i++) {
		if (isInside(pointToCheck, Object.values(bodyPartsEnum)[i])) {
			bodyPart = Object.keys(bodyPartsEnum)[i];
			break;
		}
	}
	console.log(`부위 [${rangePart}] 이며, 파트는 [${bodyPart}]`);
}


